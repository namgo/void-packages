# Template file for 'EmulationStation'
pkgname=EmulationStation
version=2.11.2
revision=1
_pugixml_version=1.10
create_wrksrc=yes
build_style=cmake
configure_args="-DOpenGL_GL_PREFERENCE=GLVND -Wno-dev"
hostmakedepends="pkg-config"
makedepends="libcurl-devel MesaLib-devel freetype-devel freeimage-devel
 SDL2-devel eigen boost-devel rapidjson vlc-devel"
short_desc="Flexible emulator front-end"
maintainer="Enno Boland <gottox@voidlinux.org>"
license="MIT"
homepage="https://github.com/RetroPie/EmulationStation"
distfiles="https://github.com/RetroPie/EmulationStation/archive/v${version}.tar.gz
 https://github.com/zeux/pugixml/releases/download/v1.10/pugixml-${_pugixml_version}.tar.gz"
checksum="6b632fe68bad5c3e0567e3bb171fe18ad7b2f8b1531d1297a7a91be95bf8734a
55f399fbb470942410d348584dc953bcaec926415d3462f471ef350f29b5870a"

post_extract() {
	mv EmulationStation-$version/* .
	rm -rf external/pugixml
	mv pugixml-${_pugixml_version} external/pugixml
}

post_install() {
	vmkdir /usr/share/EmulationStation/
	vcopy resources/ /usr/share/EmulationStation/resources
	vlicense LICENSE.md
}
